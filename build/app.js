'use strict';var game,graphics,creatures=[],creatureGroup,gamepad,gamepadConnected=!1;window.onload=function(){game=new Phaser.Game({width:200,height:200,antialias:!0,renderer:Phaser.CANVAS,state:{preload:preload,create:create,update:update,render:render}})};var preload=function(){game.load.image('hero','sprites/hero.png'),game.load.image('creature','sprites/creature.png'),game.load.image('bg','sprites/bg.png')},create=function(){game.scale.scaleMode=Phaser.ScaleManager.RESIZE,game.scale.parentIsWindow=!0,graphics=game.add.graphics(0,0),game.physics.startSystem(Phaser.Physics.P2JS),game.physics.p2.setImpactEvents(!0),game.physics.p2.restitution=0.8;game.physics.p2.createCollisionGroup();game.physics.p2.updateBoundsCollisionGroup(),creatureGroup=game.add.group(),creatureGroup.enableBody=!0,creatureGroup.physicsBodyType=Phaser.Physics.P2JS,game.input.gamepad.start(),gamepad=game.input.gamepad.pad1,gamepad.addCallbacks(void 0,{onConnect:function onConnect(){console.log('Gamepad connected!'),gamepadConnected=!0}}),setTimeout(function(){var d=game.add.tileSprite(0,0,game.width,game.height,'bg');d.fixedToCamera=!0,game.world.sendToBack(d);for(var f=1;10>=f;f++)for(var g=6;1<=g;g--)creatures.push(new Enemy({x:50*f,y:50*g,velocity:{x:700,y:20},velocityMax:200,collisionGroup:creatureGroup}));var e=new Hero({x:game.width/2,y:game.height/2,sprite:'hero',collisionGroup:creatureGroup});creatures.push(e)},200)},update=function(){creatures.forEach(function(c){null===c||c.update()}),creatureGroup.children=creatureGroup.children.sort(function(c,d){return c.position.y-d.position.y})},render=function(){graphics.clear(),creatures.forEach(function(c){null===c||c.render()})};
"use strict";var constrain=function(a,b,c){return a<b?b:a>c?c:a};
'use strict';var _createClass=function(){function c(d,e){for(var g,f=0;f<e.length;f++)g=e[f],g.enumerable=g.enumerable||!1,g.configurable=!0,'value'in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}return function(d,e,f){return e&&c(d.prototype,e),f&&c(d,f),d}}();function _classCallCheck(c,d){if(!(c instanceof d))throw new TypeError('Cannot call a class as a function')}var Creature=function(){function c(d){_classCallCheck(this,c),this.props={x:d.x?d.x:100,y:d.y?d.y:100,acceleration:d.acceleration?d.acceleration:4,velocity:d.velocity?d.velocity:{x:0,y:0},damping:d.damping?d.damping:0.999,angularDamping:d.angularDamping?d.angularDamping:1,sprite:d.sprite?d.sprite:'creature',collisionGroup:d.collisionGroup},this.sprite=this.props.collisionGroup.create(this.props.x,this.props.y,this.props.sprite),this.sprite.body.setCollisionGroup(this.props.collisionGroup),this.sprite.body.collides([this.props.collisionGroup,this.props.collisionGroup]),this.sprite.scale.set(0.5),this.sprite.body.setCircle(38/2.2),this.sprite.setHealth(100),this.sprite.body.angularDamping=this.props.angularDamping,this.sprite.body.damping=this.props.damping}return _createClass(c,[{key:'processCallback',value:function processCallback(){return!0}},{key:'destroy',value:function destroy(){var d=this;this.props.collisionGroup.remove(this.sprite,!0),creatures=creatures.filter(function(e){return e.id==d.id})}},{key:'update',value:function update(){this.dying&&this.destroy()}},{key:'render',value:function render(){}}]),c}();
"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var Enemy=function(a){function b(c){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c))}return _inherits(b,a),b}(Creature);
"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var Hero=function(a){function b(c){_classCallCheck(this,b);var d=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,c));return d.elapsed=0,d.keys={up:game.input.keyboard.addKey(Phaser.Keyboard.UP),down:game.input.keyboard.addKey(Phaser.Keyboard.DOWN),left:game.input.keyboard.addKey(Phaser.Keyboard.LEFT),right:game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),space:game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)},d}return _inherits(b,a),_createClass(b,[{key:"handleKeyboard",value:function handleKeyboard(c){this.keys.up.isDown&&(this.sprite.body.velocity.y-=c*this.props.acceleration),this.keys.down.isDown&&(this.sprite.body.velocity.y+=c*this.props.acceleration),this.keys.left.isDown&&(this.sprite.body.velocity.x-=c*this.props.acceleration),this.keys.right.isDown&&(this.sprite.body.velocity.x+=c*this.props.acceleration)}},{key:"handleGamepad",value:function handleGamepad(c){var d=gamepad.axis(Phaser.Gamepad.XBOX360_STICK_LEFT_X),e=gamepad.axis(Phaser.Gamepad.XBOX360_STICK_LEFT_Y);d&&(this.sprite.body.velocity.x+=this.props.acceleration*c*d),e&&(this.sprite.body.velocity.y+=this.props.acceleration*c*e)}},{key:"update",value:function update(){var c=game.time.time-this.elapsed;this.elapsed=game.time.time,!1!==gamepadConnected&&this.handleGamepad(c),this.handleKeyboard(c)}},{key:"render",value:function render(){}}]),b}(Creature);
